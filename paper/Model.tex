\section{Model}

In our model we sought to understand the link between resource richness for an cooperative group and their resulting investments into two social traits. The first trait is a cooperative trait modelled as a simple public good which helped all member of the patch to survive for longer ($\mathbf{X}$). The second is a competitive trait modelled as a simple blind bid game the winning group then gaining control of one of the loser's resources ($\mathbf{Y}$). 

We modeled an infinite population consisting of individual patches. A patch is identified by its quality level, $q \in \mathbb{Z} : q \in \left[ 1, Q \right]$, and the number of individuals on the patch, $n \in \mathbb{Z} : n \in \left[ 0, N \right]$. Where the maximum quality, $Q$, and maximum group size, $N$, are predetermined parameters. 

The distribution of patches in the population can therefore be described by a $q \times n$ matrix $\mathbf{F}$ with elements $f_{q,n}$. Equally, the evolved strategies of cooperation, $\mathbf{X}$, and conflict, $\mathbf{Y}$ are matrices which indicate the strategy of individual in state $\{q, n\}$. 

To find the stable distribution of patch frequencies we first derived the equations for how frequencies change in the model. We constructed a matrix $\mathbf{F}'$ which describes how demographic processes and between patch interactions affect the frequency of each patch type.

\subsection{Environmental transitions}
The environment may gain and lose resources naturally through variation in various abiotic and biotic factors that are not controllable by the individuals we model. This represents the natural gain and loss from the environment.

\begin{align}
    E_{q,n} = \sum^Q_{q_1=1} \sum^Q_{q_2=1}  t_{q_2, q_1} f_{q_2, n} - t_{q_1, q_2} f_{q_1, n} \,
\end{align}

where, $E$ is the matrix of changes due to environment, $\mathbf{T}$ is a $q \times q$ matrix with entries being this environmental rate of change. In our model we further specified that the matrix $\mathbf{T}$ is a sparse matrix with a subdiagonal where all entries equal to some gain value and a superdiagonal where all values equal to a loss value. This ensures gains and losses happen in stepwise manner and patches may not gain or lose more than one resource at once.

\subsection{Natural mortality}
Death may occur through natural causes at any time causing a patch to lose members. We modelled beth the cooperative and competitive traits as causing a cost to survival. The cooperative trait however offset that cost by reducing overall mortality on the patch based on the average cooperation level. This gives the matrix $M$ as the changes in frequency due to mortality events:

\begin{align}
    M_{q,n} &= \sum^N_{n=1} (n+1) f_{q, n+1} m_{q, n+1} - n\ f_{q, n} m_{q, n}\ , \\
    \text{where, }&\nonumber\\ 
    m_{q,n} &= B\,\exp\left( -n \left( \frac{n\ x_{q,n}}{n} \right) \right) + \mu_x x_{q,n}^2 + \mu_y y_{q,n}^2\ .
\end{align}

\subsection{Local Births}
In patches with at least one individual that are not at the maximum group size $N$ there can be birth events. Which are modelled by matrix $B$:

\begin{align}
    B_{q,n} = \sum^Q_{q=1} \sum^N-1_{n=1}
\end{align}